(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{3181:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/widgets/chat",function(){return n(3235)}])},3235:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294),r=n(6154),s=n(9144),o=n(1608);let u="POST_MESSAGE_CHANNEL_KEY",l={send:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.parent)return window.parent.postMessage(JSON.parse(JSON.stringify({source:u,type:e,data:t})),"*")},on:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return window.addEventListener("message",n=>{var a,i;if((null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.source)===u){let a=(null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.type)===e;a&&t(n.data.data)}})}},d=e=>l.send("ERROR_CHAT_BOT_DETAILS_MESSAGE_KEY",e),c=async(e,t)=>{let n=o.w.apiUrl,a=await r.Z.post("".concat(n,"/api/v1/secret-key/validate-secret-key"),{secretKey:e,websiteUrl:t});return a.data},_=async e=>{let t=o.w.apiUrl,n=await r.Z.get("".concat(t,"/api/v1/secret-key/get-chatbot/").concat(e));return n.data},E=()=>{let e=i.useRef(!0),[t,n]=i.useState(!1),[r,o]=i.useState(),[u,E]=i.useState();i.useEffect(()=>{setTimeout(()=>{e.current&&(l.on("SEND_CHAT_BOT_DETAILS_MESSAGE_KEY",e=>{o(e)}),e.current=!1)},0)},[]),i.useEffect(()=>{r&&r.secretKey&&r.websiteUrl&&(async()=>{try{let e=await c(r.secretKey,r.websiteUrl);if(e.isValid){let e=await _(r.secretKey);E(e),n(!0)}}catch(e){d(e)}})()},[r]);let S=()=>l.send("TOGGLE_CHAT_BOT_DETAILS_MESSAGE_KEY"),w=e=>l.send("LOAD_CHAT_BOT_DETAILS_MESSAGE_KEY",e);if(t){var f;return(0,a.jsx)(s.Z,{username:null==u?void 0:null===(f=u.chatbot)||void 0===f?void 0:f.username,onClose:S,onLoad:w})}return null};E.loadInternalScript=!1,E.hideHeader=!0,E.hideFooter=!0,t.default=E}},function(e){e.O(0,[502,144,774,888,179],function(){return e(e.s=3181)}),_N_E=e.O()}]);